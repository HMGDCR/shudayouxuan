(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ad90225"],{"2ad7":function(e,t,a){"use strict";var i=a("3ecc"),l=a.n(i);l.a},"2fdb":function(e,t,a){"use strict";var i=a("5ca1"),l=a("d2c8"),o="includes";i(i.P+i.F*a("5147")(o),"String",{includes:function(e){return!!~l(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"3bc2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n         电影"+e._s(e.isAdd?"添加":"编辑")+"   \n     ")]),a("div",[a("el-form",{ref:"form",staticClass:"main-content",attrs:{model:e.movieData,"label-width":"80px"}},[a("div",{staticClass:"filmInfo"},[a("el-form-item",{attrs:{label:"电影名称"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.name,callback:function(t){e.$set(e.movieData,"name",t)},expression:"movieData.name"}})],1),e.isAdd?e._e():a("el-form-item",{attrs:{label:"电影ID"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.movieData.filmId,callback:function(t){e.$set(e.movieData,"filmId",t)},expression:"movieData.filmId"}})],1),a("el-form-item",{attrs:{label:"内容分类"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.category,callback:function(t){e.$set(e.movieData,"category",t)},expression:"movieData.category"}})],1),a("el-form-item",{attrs:{label:"导演"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.director,callback:function(t){e.$set(e.movieData,"director",t)},expression:"movieData.director"}})],1),a("el-form-item",{attrs:{label:"上映时间"}},[a("el-date-picker",{staticClass:"timePicker",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.movieData.premiereAt,callback:function(t){e.$set(e.movieData,"premiereAt",t)},expression:"movieData.premiereAt"}})],1),a("el-form-item",{attrs:{label:"评分"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.grade,callback:function(t){e.$set(e.movieData,"grade",t)},expression:"movieData.grade"}})],1),a("el-form-item",{attrs:{label:"语言"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.language,callback:function(t){e.$set(e.movieData,"language",t)},expression:"movieData.language"}})],1),a("el-form-item",{attrs:{label:"时长"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.runtime,callback:function(t){e.$set(e.movieData,"runtime",t)},expression:"movieData.runtime"}})],1),a("el-form-item",{attrs:{label:"产地"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.nation,callback:function(t){e.$set(e.movieData,"nation",t)},expression:"movieData.nation"}})],1),a("el-form-item",{attrs:{label:"电影类型"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.filmType,callback:function(t){e.$set(e.movieData,"filmType",t)},expression:"movieData.filmType"}})],1),a("el-form-item",{attrs:{label:"简介"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",resize:"none"},model:{value:e.movieData.synopsis,callback:function(t){e.$set(e.movieData,"synopsis",t)},expression:"movieData.synopsis"}})],1),a("div",{staticClass:"switchButton"},[a("el-form-item",{staticClass:"onSale",attrs:{label:"在售"}},[a("el-switch",{attrs:{"active-text":e.movieData.isSale?"是":"否"},on:{change:e.isSaleState},model:{value:e.movieData.isSale,callback:function(t){e.$set(e.movieData,"isSale",t)},expression:"movieData.isSale"}})],1),a("el-form-item",{staticClass:"preSell",attrs:{label:"预售"}},[a("el-switch",{attrs:{"active-text":e.movieData.isPresale?"是":"否"},on:{change:e.isPresaleState},model:{value:e.movieData.isPresale,callback:function(t){e.$set(e.movieData,"isPresale",t)},expression:"movieData.isPresale"}})],1)],1),a("el-form-item",{attrs:{label:"海报"}},[a("el-upload",{attrs:{action:"http://122.51.25.152:3000/admin/film/upload","list-type":"picture-card","auto-upload":!0,"on-success":e.handleAvatarSuccess},scopedSlots:e._u([{key:"file",fn:function(t){var i=t.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:i.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(i)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():a("span",{staticClass:"el-upload-list__item-delete",on:{change:function(t){return e.handleDownload(i)}}},[a("i",{staticClass:"el-icon-download"})]),e.disabled?e._e():a("span",{staticClass:"el-upload-list__item-delete",on:{change:function(t){return e.handleRemove(i)}}},[a("i",{staticClass:"el-icon-delete"})])])])}}])},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1)],1),a("el-form-item",{staticClass:"add-submit"},[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.onSubmit}},[e._v("立即"+e._s(e.isAdd?"添加":"编辑"))]),a("el-button",{nativeOn:{click:function(t){return e.clearAll(t)}}},[e._v("取消")])],1)],1)],1)])},l=[],o=(a("6762"),a("2fdb"),{data:function(){return{loading:!1,dialogImageUrl:"",dialogVisible:!1,disabled:!1,movieData:{}}},created:function(){if(this.isAdd)return!1;this.$route.params.filmId,console.log(this.$route.params.filmId),console.log(this.$route.path.includes("add")),this.getFilmDetail(this.$route.params.filmId)},methods:{getFilmDetail:function(e){var t=this,a="/film/getDetail?filmId="+e;this.$axios.get(a).then((function(e){console.log(e),t.movieData=e.film})).catch((function(e){console.log(e)}))},handleRemove:function(e){console.log(e)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0,console.log(e.url),this.movieData.poster=e.url,console.log(this.movieData.poster)},handleDownload:function(e){console.log(e)},handleAvatarSuccess:function(e,t,a){console.log(e),this.movieData.poster=e.image.url,console.log(this.movieData.poster)},isSaleState:function(e){this.movieData.isPresale=!this.movieData.isSale},isPresaleState:function(e){this.movieData.isSale=!this.movieData.isPresale},onSubmit:function(){var e=this;this.loading=!0;var t="".concat(this.isAdd?"/film/add":"/film/edit"),a=this.movieData;console.log(a),this.$axios.post(t,a).then((function(t){e.$message.success("电影".concat(e.isAdd?"添加":"修改","成功！")),e.loading=!1,e.isAdd||(e.$router.push("/movie/list"),console.log(0xca1c249de38e))})).catch((function(t){e.$message.error("请输入完整信息！"),e.loading=!1}))},clearAll:function(){this.movieData={},this.isAdd||this.$router.push("/movie/list")}},computed:{isAdd:function(){return console.log(111111111),this.$route.path.includes("add")}}}),s=o,n=(a("2ad7"),a("2877")),r=Object(n["a"])(s,i,l,!1,null,"b2f8bedc",null);t["default"]=r.exports},"3ecc":function(e,t,a){},5147:function(e,t,a){var i=a("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[i]=!1,!"/./"[e](t)}catch(l){}}return!0}},6762:function(e,t,a){"use strict";var i=a("5ca1"),l=a("c366")(!0);i(i.P,"Array",{includes:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},aae3:function(e,t,a){var i=a("d3f4"),l=a("2d95"),o=a("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==l(e))}},d2c8:function(e,t,a){var i=a("aae3"),l=a("be13");e.exports=function(e,t,a){if(i(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(l(e))}}}]);
//# sourceMappingURL=chunk-6ad90225.45c91667.js.map