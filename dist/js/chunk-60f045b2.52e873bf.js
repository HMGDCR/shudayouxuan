(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60f045b2"],{"2fdb":function(e,t,a){"use strict";var i=a("5ca1"),o=a("d2c8"),l="includes";i(i.P+i.F*a("5147")(l),"String",{includes:function(e){return!!~o(this,e,l).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"3bc2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n         电影"+e._s(e.isAdd?"添加":"编辑")+"   \n     ")]),a("div",[a("el-form",{ref:"form",staticClass:"main-content",attrs:{model:e.movieData,"label-width":"80px"}},[a("div",{staticClass:"filmInfo"},[a("el-form-item",{attrs:{label:"电影名称"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.name,callback:function(t){e.$set(e.movieData,"name",t)},expression:"movieData.name"}})],1),e.isAdd?e._e():a("el-form-item",{attrs:{label:"电影ID"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.movieData.filmId,callback:function(t){e.$set(e.movieData,"filmId",t)},expression:"movieData.filmId"}})],1),a("el-form-item",{attrs:{label:"内容分类"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.category,callback:function(t){e.$set(e.movieData,"category",t)},expression:"movieData.category"}})],1),a("el-form-item",{attrs:{label:"导演"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.director,callback:function(t){e.$set(e.movieData,"director",t)},expression:"movieData.director"}})],1),a("el-form-item",{attrs:{label:"上映时间"}},[a("el-date-picker",{staticClass:"timePicker",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.movieData.premiereAt,callback:function(t){e.$set(e.movieData,"premiereAt",t)},expression:"movieData.premiereAt"}})],1),a("el-form-item",{attrs:{label:"评分"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.grade,callback:function(t){e.$set(e.movieData,"grade",t)},expression:"movieData.grade"}})],1),a("el-form-item",{attrs:{label:"语言"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.language,callback:function(t){e.$set(e.movieData,"language",t)},expression:"movieData.language"}})],1),a("el-form-item",{attrs:{label:"时长"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.runtime,callback:function(t){e.$set(e.movieData,"runtime",t)},expression:"movieData.runtime"}})],1),a("el-form-item",{attrs:{label:"产地"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.nation,callback:function(t){e.$set(e.movieData,"nation",t)},expression:"movieData.nation"}})],1),a("el-form-item",{attrs:{label:"电影类型"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.movieData.filmType,callback:function(t){e.$set(e.movieData,"filmType",t)},expression:"movieData.filmType"}})],1),a("el-form-item",{attrs:{label:"简介"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",resize:"none"},model:{value:e.movieData.synopsis,callback:function(t){e.$set(e.movieData,"synopsis",t)},expression:"movieData.synopsis"}})],1),a("div",{staticClass:"switchButton"},[a("el-form-item",{staticClass:"onSale",attrs:{label:"在售"}},[a("el-switch",{attrs:{"active-text":e.movieData.isSale?"是":"否"},on:{change:e.isSaleState},model:{value:e.movieData.isSale,callback:function(t){e.$set(e.movieData,"isSale",t)},expression:"movieData.isSale"}})],1),a("el-form-item",{staticClass:"preSell",attrs:{label:"预售"}},[a("el-switch",{attrs:{"active-text":e.movieData.isPresale?"是":"否"},on:{change:e.isPresaleState},model:{value:e.movieData.isPresale,callback:function(t){e.$set(e.movieData,"isPresale",t)},expression:"movieData.isPresale"}})],1)],1),a("el-form-item",{attrs:{label:"海报"}},[a("Poster",{on:{sonData:e.getChildData,imgUplLoadState:e.imgUpload}})],1),a("el-form-item",{attrs:{label:"剧照"}},[a("el-upload",{attrs:{action:"http://122.51.25.152:3000/admin/film/upload","list-type":"picture-card","on-preview":e.handlePreviewPhoto,"on-success":e.photoUpload,"on-remove":e.handleRemovePhoto}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),a("el-form-item",{staticClass:"add-submit"},[a("el-button",{attrs:{type:"primary",loading:e.loading,disabled:e.imgUpdateState},on:{click:e.onSubmit}},[e._v("立即"+e._s(e.isAdd?"添加":"编辑"))]),a("el-button",{nativeOn:{click:function(t){return e.clearAll(t)}}},[e._v("取消")])],1)],1)],1)])},o=[],l=(a("7f7f"),a("6762"),a("2fdb"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://132.232.87.95:3000/admin/film/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])}),s=[],n={data:function(){return{imageUrl:""}},mounted:function(){this.imageUrl=this.$store.state.posterDefault,this.$store.commit("posterClear","")},methods:{handleAvatarSuccess:function(e,t){console.log(e),console.log(t),this.imageUrl=e.image.url,console.log(this.imageUrl),this.$emit("imgUplLoadState",!1)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}},watch:{imageUrl:function(e,t){console.log(e),this.$emit("sonData",e),this.imageUrl=e}}},r=n,c=(a("4443"),a("2877")),m=Object(c["a"])(r,l,s,!1,null,null,null),d=m.exports,u={components:{Poster:d},data:function(){return{imageUrl:"",imgUpdateState:!0,loading:!1,dialogImageUrl:"",dialogVisible:!1,disabled:!1,movieData:{category:"凄凄切切群",director:"啊啊啊啊啊啊啊啊",premiereAt:"1310572800000",name:"111111",update:"08-13 20:30:08",photos:[],actors:[{name:"算得上是",role:" 是s",avatarAddress:"",key:1565685916282}],poster:"",grade:"1",language:" 少时诵诗书",filmId:"5d517927eaa375006cdbdc6b",runtime:"asdfg",filmType:"2D",isPresale:!1,timeType:"",isSale:!0,synopsis:"s",nation:" 2222"}}},created:function(){if(this.isAdd)return!1;this.$route.params.filmId,console.log(this.$route.params.filmId),console.log(this.$route.path.includes("add")),this.getFilmDetail(this.$route.params.filmId)},methods:{getFilmDetail:function(e){var t=this,a="/film/getDetail?filmId="+e;this.$axios.get(a).then((function(e){console.log(e),t.movieData=e.film,t.$store.commit("posterToChild",t.movieData.poster),console.log(t.movieData.poster)})).catch((function(e){console.log(e)}))},imgUpload:function(e){this.imgUpdateState=e},handleRemovePhoto:function(e,t){console.log(e,t)},handlePreviewPhoto:function(e){console.log(e)},photoUpload:function(e,t,a){console.log(e),console.log(t),console.log(a),this.movieData.photos.push({url:t.response.image.url,name:t.name,imgId:t.response.image.imgId,uid:t.uid,status:t.status})},getChildData:function(e){console.log(11111111111,e),this.movieData.poster=e},isSaleState:function(e){this.movieData.isPresale=!this.movieData.isSale},isPresaleState:function(e){this.movieData.isSale=!this.movieData.isPresale},onSubmit:function(){var e=this;this.loading=!0;var t="".concat(this.isAdd?"/film/add":"/film/edit"),a=this.movieData;console.log(a),this.$axios.post(t,a).then((function(t){e.$message.success("电影".concat(e.isAdd?"添加":"修改","成功！")),e.loading=!1,e.isAdd||(e.$router.push("/movie/list"),console.log(0xca1c249de38e))})).catch((function(t){e.$message.error("请输入完整信息！"),e.loading=!1}))},clearAll:function(){this.movieData={},this.isAdd||this.$router.push("/movie/list")}},computed:{isAdd:function(){return console.log(111111111),this.$route.path.includes("add")}}},p=u,f=(a("780d"),Object(c["a"])(p,i,o,!1,null,"4c78115c",null));t["default"]=f.exports},4443:function(e,t,a){"use strict";var i=a("a765"),o=a.n(i);o.a},5147:function(e,t,a){var i=a("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[i]=!1,!"/./"[e](t)}catch(o){}}return!0}},6762:function(e,t,a){"use strict";var i=a("5ca1"),o=a("c366")(!0);i(i.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"780d":function(e,t,a){"use strict";var i=a("ad79"),o=a.n(i);o.a},"7f7f":function(e,t,a){var i=a("86cc").f,o=Function.prototype,l=/^\s*function ([^ (]*)/,s="name";s in o||a("9e1e")&&i(o,s,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(e){return""}}})},a765:function(e,t,a){},aae3:function(e,t,a){var i=a("d3f4"),o=a("2d95"),l=a("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==o(e))}},ad79:function(e,t,a){},d2c8:function(e,t,a){var i=a("aae3"),o=a("be13");e.exports=function(e,t,a){if(i(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(o(e))}}}]);
//# sourceMappingURL=chunk-60f045b2.52e873bf.js.map